<div class="content-row spaced">
    <div class="navrow">
        <ul>
            <li><a href="#/absences" class="active" data-activate="absences">Student Absences</a></li>
            <li><a href="#/classes" data-activate="classes">Today's Classes</a></li>
            <li><a href="#/helpers" data-activate="helpers">Helper Checkins</a></li>
        </ul>
    </div>
</div>

<div class="content-row spaced">
    <h1>Operations Panel for {{today}}</h1>
</div>

<div id="absences" class="today_content content-row spaced">
    <div class="col-row">
        <div class="col c10" style="vertical-align:top;">
            <h2>Student Absences</h2>
            <p>
                <table class="absentlist">
                    <thead>
                        <tr>
                            <th style="width:50%;">Course Name</th>
                            <th style="width:30%;">Student Name</th>
                            <th style="width:15%;">Last Update</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="3">
                                <h3 id="abs_p1" style="margin-top:0;">Period 1/1&amp;2 <span class="muted" style="font-weight:normal;">({{absize_p1}} absent)</span></h3>
                            </td>
                        </tr>
                        {{absences_p1}}
                        <tr>
                            <td colspan="3">
                                <h3 id="abs_p2" style="margin-top:0;">Period 2 <span class="muted" style="font-weight:normal;">({{absize_p2}} absent)</span></h3>
                            </td>
                        </tr>
                        {{absences_p2}}
                        <tr>
                            <td colspan="3">
                                <h3 id="abs_p3" style="margin-top:0;">Period 3/3&amp;4 <span class="muted" style="font-weight:normal;">({{absize_p3}} absent)</span></h3>
                            </td>
                        </tr>
                        {{absences_p3}}
                        <tr>
                            <td colspan="3">
                                <h3 id="abs_p4" style="margin-top:0;">Period 4 <span class="muted" style="font-weight:normal;">({{absize_p4}} absent)</span></h3>
                            </td>
                        </tr>
                        {{absences_p4}}
                        <tr>
                            <td colspan="3">
                                <h3 id="abs_aca" style="margin-top:0;">Academic Program <span class="muted" style="font-weight:normal;">({{absize_aca}} absent)</span></h3>
                            </td>
                        </tr>
                        {{absences_aca}}
                    </tbody>
                </table>
            </p>
        </div>
    </div>
</div>

<div id="classes" class="today_content content-row spaced hide">
    <div class="col-row">
        <div class="col c5" style="vertical-align:top;">
            <h2>Today's Classes</h2>
            
            <h3 id="period_1">Period 1/1&amp;2 <span class="muted" style="font-weight:normal;">({{size_p1}} classes)</span></h3>
            <p>
                <table class="courselist hiden">
                    <thead>
                        <tr>
                            <th style="width:85%;">Course Name</th>
                            <th style="width:15%;">Room</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{period_1}}
                    </tbody>
                </table>
            </p>

            <h3 id="period_3">Period 3/3&amp;4 <span class="muted" style="font-weight:normal;">({{size_p3}} classes)</span></h3>
            <p>
                <table class="courselist hiden">
                    <thead>
                        <tr>
                            <th style="width:85%;">Course Name</th>
                            <th style="width:15%;">Room</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{period_3}} 
                    </tbody>
                </table>
            </p>
        </div>
        <div class="col c5" style="vertical-align:top;">
            <h3 id="period_2">Period 2 <span class="muted" style="font-weight:normal;">({{size_p2}} classes)</span></h3>
            <p>
                <table class="courselist hiden">
                    <thead>
                        <tr>
                            <th style="width:85%;">Course Name</th>
                            <th style="width:15%;">Room</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{period_2}}
                    </tbody>
                </table>
            </p>

            <h3 id="period_4">Period 4 <span class="muted" style="font-weight:normal;">({{size_p4}} classes)</span></h3>
            <p>
                <table class="courselist hiden">
                    <thead>
                        <tr>
                            <th style="width:85%;">Course Name</th>
                            <th style="width:15%;">Room</th>
                        </tr>
                    </thead>
                    <tbody> 
                        {{period_4}}
                    </tbody>
                </table>
            </p>

            <h3 id="academic">Academic Program <span class="muted" style="font-weight:normal;">({{size_academic}} classes)</span></h3>
            <p>
                <table class="courselist hiden">
                    <thead>
                        <tr>
                            <th style="width:85%;">Course Name</th>
                            <th style="width:15%;">Room</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{academic}} 
                    </tbody>
                </table>
            </p>
        </div>
    </div>
</div>

<div id="helpers" class="today_content content-row spaced hide">
    <div class="col-row">
        <div class="col c10" style="vertical-align:top;">
            <h2>Helper Checkin/Checkouts</h2>
            
            <p>
                <table class="checkinlist">
                    <thead>
                        <tr>
                            <th style="width:40%;">Helper Name</th>
                            <th style="width:30%;">In Time</th>
                            <th style="width:30%;">Out Time</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{checkins}}
                    </tbody>
                </table>
            </p>

        </div>
    </div>
</div>


<script type="text/javascript">
$(document).ready(function() {
    if ($('#' + window.location.hash.split('/')[1]).length) {
        var item = window.location.hash.split('/')[1];
        $('.today_content').hide();
        $('a.active').removeClass('active');
        $('a[data-activate=' + item + ']').addClass('active');
        $('#' + item).fadeIn();
        window.location.hash = '/' + item;
    }

    $(window).on('hashchange', function() {
        var item = window.location.hash.split('/')[1];
        $('.today_content').hide();
        $('a.active').removeClass('active');
        $('a[data-activate=' + item + ']').addClass('active');
        $('#' + item).fadeIn();
        window.location.hash = '/' + item;
    });

});

function signOut(siid) {
    laoshi.rpc({'method': 'sign_out_helper', 'signin_id': siid});
    laoshi.toast('Signed out successfully. Refresh now to see changes.');
}

</script>