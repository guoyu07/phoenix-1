<div id="course_list" class="content-row spaced body-emulate">
    <h1>Program Course Listing</h1>
    
    <p><button class="button button-blue">Create a Course</button></p>

    <table class="courses">
        <thead>
            <tr>
                <th style="width:10%;" class="tipped" title="Course Code">CC</th>
                <th style="width:30%;">Course Name</th>
                <th style="width:20%;">Lead Instructor</th>
                <th style="width:10%;" class="tipped" title="Enrolled Students/Available Spaces">E/A</th>
                <th style="width:15%;">Popularity</th>
                <th style="width:15%;">Flags</th>
            </tr>
        </thead>
        <tbody>
{{course_rows}}            
        </tbody>
    </table>
</div>

<script type="text/javascript">
var courseJson = {{courseJson}}

jQuery(document).ready(function ($) {

    // Course building
    $.each(courseJson, function (i, c) {
        console.log(c);
        $('table.courses>tbody').append('<tr class="course" data-course-id="' + c.CourseID + '" data-subject="' + c.CourseSubj + '">' +
            '<td>' + c.CourseCode + '</td>' +
            '<td class="tipped" title="' + c.CourseSynop + '"><a href="./course_view.php?cid=' + c.CourseID + '">' + c.CourseTitle + '</a></td>' +
            '<td><a href="mailto:' + c.TeacherData.TeacherEmail + '">' + c.TeacherData.TeacherName + '</a></td>' +
            '<td class="tipped" title="Over ' + ((c.ClassData.length == 1) ?  'a single timeslot' : c.ClassData.length + ' total timeslots' ) + '"><span style="font-weight:700;">' + c.TotalEnrollCount + '</span>/<span class="muted">' + c.TotalSpacesAvailable + '</span></td>' + 
            '<td><em class="muted">Not displayed</em></td>' +
            '<td></td>' +
            '</tr>');
    });

});
</script>